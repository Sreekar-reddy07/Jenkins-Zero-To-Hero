pipeline {
  agent none
  stages {
    stage('Testing for Maven') {
      agent {
        docker { image 'maven:3.8.1-adoptopenjdk-11' }
      }
      steps {
        sh '''
          # Ensure Maven is installed
          mvn --version
          
          # Java code
          echo "Running Java Program for Addition and Subtraction"
          echo '
          public class SimpleMath {
              public static void main(String[] args) {
                  int num1 = 10; // First number
                  int num2 = 5;  // Second number

                  // Perform addition and subtraction
                  int sum = num1 + num2;
                  int difference = num1 - num2;

                  // Display the results
                  System.out.println("Addition: " + sum);
                  System.out.println("Subtraction: " + difference);
              }
          }
          ' > SimpleMath.java

          # Compile and run the Java program
          javac SimpleMath.java
          java SimpleMath
        '''
      }
    }
    stage('Testing for Node.js') {
      agent {
        docker { image 'node:16-alpine' }
      }
      steps {
        sh '''
          # Ensure Node.js and npm are installed
          node --version
          npm --version

          # Run Node.js code
          echo "Running Node.js Program for Addition and Subtraction"
          echo "
          // Define two numbers
          const num1 = 10; // First number
          const num2 = 5;  // Second number

          // Perform addition and subtraction
          const sum = num1 + num2;
          const difference = num1 - num2;

          // Display the results
          console.log('Addition:', sum);
          console.log('Subtraction:', difference);
          " > math.js

          # Run the Node.js program
          node math.js
        '''
      }
    }
    stage('Testing for Python') {
      agent {
        docker { image 'python:latest' }
      }
      steps {
        sh '''
          # Ensure Python is installed
          python --version

          # Create Python script for addition and subtraction with correct indentation
          echo "Running Python Program for Addition and Subtraction"
          cat <<EOF > math.py
          # Define two numbers
          num1 = 10  # First number
          num2 = 5   # Second number

          # Perform addition and subtraction
          sum = num1 + num2
          difference = num1 - num2

          # Display the results
          print("Addition:", sum)
          print("Subtraction:", difference)
          EOF

          # Run the Python program
          python math.py
        '''
      }
    }
  }
}
